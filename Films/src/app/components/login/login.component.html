<div class="container d-flex justify-content-center align-items-center box-login">
  <div class="row justify-content-center">
    <div class="col-md-15">
      <div class="card shadow-lg card-login" style="border-radius: 1rem; width: 100%; padding: 20px;">
        <div class="card-body p-5">
          <h2 class="card-title mb-4 text-center">INICIAR SESIÓN</h2>
          <form class="needs-validation" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            <div class="form-group mb-4">
              <label for="email" class="label-spacing label">Email</label>
              <input 
                type="text" 
                class="form-control no-border input"
                [class.is-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" 
                id="email" 
                name="email" 
                formControlName="email"
                placeholder="Ingrese su email" 
                required>
              <div class="invalid-feedback">
                <div *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.hasError('required')">El email es requerido.</div>
                <div *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.hasError('email')">El formato del email es incorrecto.</div>
                <div *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.hasError('pattern')">Dominio incorrecto.</div>
              </div>
            </div>
            <div class="form-group mb-4">
              <label for="password" class="label-spacing">Contraseña</label>
              <div class="input-group">
                <input 
                  [type]="mostrarContrasena ? 'text' : 'password'" 
                  class="form-control no-border input"
                  [class.is-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"  
                  id="password" 
                  name="password" 
                  formControlName="password" 
                  placeholder="Ingrese su contraseña" 
                  required>
                <div class="input-group-append">
                  <button 
                    type="button" 
                    class="btn btn-link" 
                    (click)="toggleMostrarContrasena()">
                    <i [ngClass]="mostrarContrasena ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
                  </button>
                </div>
                <div class="invalid-feedback">
                  <div *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.hasError('required')">
                    La contraseña es requerida.
                  </div>
                  <div *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.hasError('minlength')">
                    La contraseña debe contener mínimo 6 caracteres.
                  </div>
                  <div *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.hasError('minDosNumeros')">
                    La contraseña debe contener mínimo 2 numeros.
                  </div>
                </div>
              </div>
              </div>
            
            <div class="text-center">
              <button type="submit" class="btn btn-primary" [disabled]="!loginForm.valid" style="width: 100%;" >
              Iniciar Sesión
            </button>
            </div>

            <div class="text-center mt-3">
              <a [routerLink]="['/registrarse']" class="text">
                ¿No tienes una cuenta? <span class="text-registrate">Regístrate</span>
              </a>
            </div>

            <div class="text-center mt-3">
              <a [routerLink]="['/recuperar-contrasena']" class="text forget-password">
                ¿Olvidaste tu contraseña?
              </a>
            </div>

            <div class="alert alert-danger mt-3" *ngIf="errorMessage">
              {{ errorMessage }}
            </div>
            <div class="alert alert-success mt-3" *ngIf="successMessage">
              {{ successMessage }}
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
